(function(){"use strict";var t={1644:function(t,e,i){t.exports=i.p+"img/error.50a1bdf4.png"},4629:function(t,e,i){var s=i(5471),r=i(8505),n=function(){var t=this,e=t._self._c;return e(r.A,[e("router-view",{staticClass:"router-view"})],1)},a=[],l={name:"App",data:()=>({})},o=l,h=i(1656),c=(0,h.A)(o,n,a,!1,null,null,null),d=c.exports,u=i(792);i(4301);s.Ay.use(u.A);var p=new u.A({theme:{themes:{light:{primary:"#6B3FA0",secondary:"#C59D5F",accent:"#2E2A24"}}}}),f=i(173),m=i(2699),y=i(5474),g=i(9456),x=i(980),w=function(){var t=this,e=t._self._c;return e(y.A,{staticClass:"d-flex align-center justify-center text-center mt-12 pt-12",attrs:{fluid:""}},[e("div",[e(x.A,{staticClass:"mb-4 mx-auto",attrs:{id:"error-image",src:i(1644),"max-width":"450"}}),e("h1",{staticClass:"h1 mb-2"},[t._v("404 Page not Found")]),e("h3",{staticClass:"h2 mb-2"},[t._v("Looks like you're lost.")]),e("router-link",{attrs:{to:"/"}},[e(m.A,{staticClass:"mt-5",staticStyle:{"font-weight":"bold"},attrs:{color:"primary"}},[e(g.A,{attrs:{left:""}},[t._v("mdi-home")]),t._v(" Go to Home ")],1)],1)],1)])},v=[],_={},C=(0,h.A)(_,w,v,!1,null,"1fc8cf55",null),A=C.exports,T=i(3675),b=i(1526),S=i(8412),D=i(8699),I=function(){var t=this,e=t._self._c;return e(T.A,{staticClass:"overflow-hidden"},[e(D.A,{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-5"}},[e(y.A,{staticStyle:{"margin-top":"50px"}},[e(S.A,{staticStyle:{"margin-top":"20px","margin-bottom":"50px"},attrs:{justify:"center"}},[e(b.A,{staticStyle:{position:"relative"},attrs:{cols:"auto"}},[e("canvas",{ref:"gridCanvas",staticStyle:{border:"1px solid #ccc"},attrs:{width:t.h_w,height:t.h_w},on:{click:t.onClickCell}}),t.tooltip?e("div",{style:{position:"absolute",top:t.tooltipY+"px",left:t.tooltipX+"px",background:"rgba(0,0,0,0.7)",color:"white",padding:"5px",borderRadius:"4px",pointerEvents:"none",whiteSpace:"pre-line",zIndex:1e3}},[t._v(" "+t._s(t.tooltip)+" ")]):t._e()])],1)],1)],1)],1)},P=[],R=(i(4114),i(8111),i(2489),i(7588),i(1701),i(8237),i(3579),i(3110),{data(){return{headers:[{text:"Timestamp",value:"ts_date_time"},{text:"Payload",value:"payload"}],h_w:800,gridRows:20,gridCols:20,cellW:0,cellH:0,ctx:null,gridData:{},lastProcessedIndex:0,visitQueue:[],visitHistory:[],currentVisit:null,animationPhase:"scan",spiralTrail:[],spiralDir:0,spiralStep:1,transitionStart:null,transitionFrom:null,transitionTo:null,SPIRAL_DURATION:2500,TRANSITION_DURATION:800,DRONE_SIZE_FACTOR:.3,initialLoadDone:!1,isIdle:!1,lastKnownCell:null,idleAngle:0,tooltip:"",tooltipX:0,tooltipY:0,diseaseColors:{},colorPalette:["#ff4d4d","#ffa500","#8a2be2","#00bfff","#2ecc71","#f1c40f","#e67e22","#3498db","#e84393","#FF007F","#3498db","#2c3e50","#2980b9"],nextColorIndex:0}},computed:{packets(){return this.$store.getters.allPackets}},watch:{packets:{handler(t){this.updateGrid(t)},deep:!0}},mounted(){this.h_w=Math.min(.9*window.innerWidth,800),this.cellW=this.h_w/this.gridCols,this.cellH=this.h_w/this.gridRows,this.ctx=this.$refs.gridCanvas.getContext("2d"),this.drawGrid(),this.drawCellCoordinates(),this.sendTelegramMessage("Drone is ready to scan")},methods:{drawGrid(){const t=this.ctx;t.clearRect(0,0,this.h_w,this.h_w),t.strokeStyle="#eee";for(let e=0;e<=this.gridCols;e++){const i=e*this.cellW;t.beginPath(),t.moveTo(i,0),t.lineTo(i,this.h_w),t.stroke()}for(let e=0;e<=this.gridRows;e++){const i=e*this.cellH;t.beginPath(),t.moveTo(0,i),t.lineTo(this.h_w,i),t.stroke()}this.drawCellCoordinates()},drawCellCoordinates(){const t=this.ctx;t.fillStyle="#555",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle";for(let e=0;e<this.gridCols;e++)for(let i=0;i<this.gridRows;i++){const s=e*this.cellW+this.cellW/2,r=this.h_w-(i*this.cellH+this.cellH/2);t.fillText(`${e},${i}`,s,r)}},parsePacket(t){const e=[],i=t.split(/\[ID\]:\d+/).filter(Boolean);return i.forEach(t=>{const i=t.match(/CELL \((\d+),\s*(\d+)\)/);if(!i)return;const s=parseInt(i[1]),r=parseInt(i[2]),n=[...t.matchAll(/(\w+)\s*:\s*(\d+)\s*:\s*(\d+)/g)],a=n.map(t=>({name:t[1],infected:parseInt(t[2]),healthy:parseInt(t[3])}));e.push({x:s,y:r,diseases:a})}),e},updateGrid(t){const e=t.slice(this.lastProcessedIndex);if(e.length){if(e.forEach(t=>{const e=this.parsePacket(t.payload);e.forEach(t=>{const e=`${t.x},${t.y}`;this.gridData[e]||this.visitQueue.some(e=>e.x===t.x&&e.y===t.y)||(this.gridData[e]=t,this.visitQueue.push(t))})}),this.lastProcessedIndex=t.length,!this.initialLoadDone){while(this.visitQueue.length){const t=this.visitQueue.shift();this.visitHistory.push(t),this.paintVisitedCell(t),this.lastKnownCell=t}return this.initialLoadDone=!0,void this.startIdleDrone()}!this.currentVisit&&this.visitQueue.length&&(this.isIdle=!1,this.startNextCell())}},startNextCell(){if(!this.visitQueue.length)return;const t=this.visitQueue.shift(),e=t.diseases.reduce((t,e)=>t+e.infected,0),i=t.diseases.reduce((t,e)=>t+e.healthy,0);t.trailColor=e>0?"red":i>0||0==t.diseases.length?"lime":"#aaa";const s=t.x*this.cellW+this.cellW/2,r=this.h_w-(t.y*this.cellH+this.cellH/2);this.currentVisit={...t,cx:s,cy:r,startTime:performance.now()},this.spiralTrail=[{x:s,y:r}],this.spiralDir=0,this.spiralStep=1,this.animationPhase="scan",this.lastKnownCell=t,requestAnimationFrame(this.animateDrone)},animateDrone(t){this.currentVisit&&(this.clearDynamicLayer(),"scan"===this.animationPhase?this.drawRectSpiral(t):this.drawTransition(t))},clearDynamicLayer(){const t=this.ctx;t.clearRect(0,0,this.h_w,this.h_w),this.drawGrid(),this.visitHistory.forEach(t=>this.paintVisitedCell(t))},drawRectSpiral(t){const e=t-this.currentVisit.startTime;if(e>=this.SPIRAL_DURATION)return void this.startTransition();const i=this.ctx,s=.012*Math.min(this.cellW,this.cellH);let r=this.spiralTrail[this.spiralTrail.length-1],n=r.x,a=r.y;0===this.spiralDir?n+=s:1===this.spiralDir?a+=s:2===this.spiralDir?n-=s:a-=s,this.spiralTrail.push({x:n,y:a}),this.spiralTrail.length%(10*this.spiralStep)===0&&(this.spiralDir=(this.spiralDir+1)%4,0!==this.spiralDir&&2!==this.spiralDir||this.spiralStep++);const l=e<500?"#00ff00":this.currentVisit.trailColor;i.strokeStyle=l,i.lineWidth=2,i.beginPath(),this.spiralTrail.forEach((t,e)=>0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)),i.stroke(),this.drawDrone(n,a),requestAnimationFrame(this.animateDrone)},startTransition(){if(this.visitHistory.push(this.currentVisit),this.visitHistory.length%10===0){const t=this.visitHistory.slice(-10),e=t.map(t=>{const e=t.diseases.reduce((t,e)=>t+e.infected,0),i=t.diseases.reduce((t,e)=>t+e.healthy,0);return`(${t.x},${t.y}) → Infected:${e} Healthy:${i}`}).join("\n");this.sendTelegramMessage(`*Drone Scan Update*\nScanned ${this.visitHistory.length} cells\n\n${e}`)}if(!this.visitQueue.length)return this.sendFinalReport(),this.currentVisit=null,void this.startIdleDrone();const t=this.spiralTrail[this.spiralTrail.length-1],e=this.visitQueue[0];this.transitionFrom=t,this.transitionTo={x:e.x*this.cellW+this.cellW/2,y:this.h_w-(e.y*this.cellH+this.cellH/2)},this.transitionStart=performance.now(),this.animationPhase="transition",requestAnimationFrame(this.animateDrone)},drawTransition(t){const e=Math.min((t-this.transitionStart)/this.TRANSITION_DURATION,1),i=this.transitionFrom.x+(this.transitionTo.x-this.transitionFrom.x)*e,s=this.transitionFrom.y+(this.transitionTo.y-this.transitionFrom.y)*e;this.drawDrone(i,s),e<1?requestAnimationFrame(this.animateDrone):this.startNextCell()},drawDrone(t,e){const i=this.ctx,s=Math.min(this.cellW,this.cellH)*this.DRONE_SIZE_FACTOR;i.fillStyle="black",i.beginPath(),i.arc(t,e,s/2.5,0,2*Math.PI),i.closePath(),i.fill()},onClickCell(t){const e=this.$refs.gridCanvas.getBoundingClientRect(),i=t.clientX-e.left,s=t.clientY-e.top,r=Math.floor(i/this.cellW),n=Math.floor((this.h_w-s)/this.cellH),a=this.gridData[`${r},${n}`];if(!a)return this.tooltip="";this.tooltipX=i+6,this.tooltipY=s+6,this.tooltip=`CELL: (${r}, ${n})\n`+a.diseases.map(t=>`DISEASE: ${t.name} | Infected ${t.infected} | Healthy ${t.healthy}`).join("\n")},paintVisitedCell(t){const e=this.ctx,i=t.x*this.cellW,s=this.h_w-(t.y+1)*this.cellH,r=t.diseases?.length?t.diseases[0].name:null,n=r?this.getDiseaseColor(r):"green";e.fillStyle=n,e.fillRect(i,s,this.cellW,this.cellH),e.strokeStyle="#ddd",e.strokeRect(i,s,this.cellW,this.cellH)},sendFinalReport(){let t=0,e=0;this.visitHistory.forEach(i=>{i.diseases.forEach(i=>{t+=i.infected,e+=i.healthy})}),this.sendTelegramMessage(`✅ *Scan Completed*\n\nCells scanned: ${this.visitHistory.length}\nTotal Infected: ${t}\nTotal Healthy: ${e}`)},startIdleDrone(){if(!this.lastKnownCell)return;this.isIdle=!0;const t=this.lastKnownCell.x*this.cellW+this.cellW/2,e=this.h_w-(this.lastKnownCell.y*this.cellH+this.cellH/2),i=()=>{if(!this.isIdle)return;this.clearDynamicLayer();const s=.3*Math.min(this.cellW,this.cellH);this.idleAngle+=.04;const r=t+s*Math.cos(this.idleAngle),n=e+s*Math.sin(this.idleAngle);this.drawDrone(r,n),requestAnimationFrame(i)};requestAnimationFrame(i)},getDiseaseColor(t){if(!this.diseaseColors[t]){const e=this.colorPalette[this.nextColorIndex%this.colorPalette.length];this.diseaseColors[t]=e,this.nextColorIndex++}return this.diseaseColors[t]},sendTelegramMessage(t){const e="8398252408:AAEJKrTFH8-YbAkJwgvvcuWrxNHeHRhlrJc",i="1006666753";fetch(`https://api.telegram.org/bot${e}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:i,text:t,parse_mode:"Markdown"})}).catch(t=>console.error("Telegram error",t))}}}),k=R,H=(0,h.A)(k,I,P,!1,null,null,null),O=H.exports;s.Ay.use(f.Ay);const $=[{name:"home",path:"/",component:O},{name:"error",path:"*",component:A}],E=new f.Ay({mode:"history",routes:$,scrollBehavior(){return{x:0,y:0}}});var F=E,W=i(5353),M=i(291),N=i(223),j=i(5122);const L={apiKey:"AIzaSyAeyN_7vFm6wJaP7mDW8SDBoYnp4Qsr5Is",authDomain:"lora-rx.firebaseapp.com",databaseURL:"https://lora-rx-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"lora-rx",storageBucket:"lora-rx.firebasestorage.app",messagingSenderId:"1003776818108",appId:"1:1003776818108:web:4c736d9a8ffd4c35b4c9b9"},K=(0,N.Wp)(L),Q=((0,j.xI)(),(0,M.C3)(K));s.Ay.use(W.Ay);var V=new W.Ay.Store({state:{rxPackets:[],rxRaw:{}},getters:{allPackets:t=>t.rxPackets,latestPacket:t=>t.rxPackets.length?t.rxPackets[t.rxPackets.length-1]:null},mutations:{SET_RX_RAW(t,e){t.rxRaw=e},SET_RX_PACKETS(t,e){t.rxPackets=e}},actions:{listenRx({commit:t}){const e=(0,M.KR)(Q,"rx");(0,M.Zy)(e,e=>{const i=e.val()||{};t("SET_RX_RAW",i);const s=Object.keys(i).map(t=>({id:t,ts:i[t].gw_ts,ts_date_time:new Date(i[t].gw_ts).toISOString().replace("T"," ").slice(0,19),payload:i[t].payload})).sort((t,e)=>t.ts-e.ts);t("SET_RX_PACKETS",s)})}}});s.Ay.config.productionTip=!1,new s.Ay({vuetify:p,router:F,store:V,created(){this.$store.dispatch("listenRx")},render:t=>t(d)}).$mount("#app")}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,i),n.exports}i.m=t,function(){var t=[];i.O=function(e,s,r,n){if(!s){var a=1/0;for(c=0;c<t.length;c++){s=t[c][0],r=t[c][1],n=t[c][2];for(var l=!0,o=0;o<s.length;o++)(!1&n||a>=n)&&Object.keys(i.O).every(function(t){return i.O[t](s[o])})?s.splice(o--,1):(l=!1,n<a&&(a=n));if(l){t.splice(c--,1);var h=r();void 0!==h&&(e=h)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[s,r,n]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.p="/"}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,n,a=s[0],l=s[1],o=s[2],h=0;if(a.some(function(e){return 0!==t[e]})){for(r in l)i.o(l,r)&&(i.m[r]=l[r]);if(o)var c=o(i)}for(e&&e(s);h<a.length;h++)n=a[h],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(c)},s=self["webpackChunkplant_disease_classification_dashboard"]=self["webpackChunkplant_disease_classification_dashboard"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],function(){return i(4629)});s=i.O(s)})();
//# sourceMappingURL=app.bda29fd6.js.map